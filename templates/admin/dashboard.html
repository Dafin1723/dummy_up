<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard - Daftar Pesanan</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- CSS Custom -->
    <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>
<a href="/admin/logout" class="btn btn-outline-danger btn-sm">Logout</a>
<div class="container mt-5">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3>ðŸ“‹ Dashboard Admin - Daftar Pesanan Print</h3>
    </div>

    <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle">

            <thead class="table-dark text-center">
                <tr>
                    <th>ID</th>
                    <th>Nama</th>
                    <th>Kontak</th>
                    <th>Jenis</th>
                    <th>Ukuran</th>
                    <th>Jumlah</th>
                    <th>File</th>
                    <th>Status</th>
                    <th>Aksi</th>
                </tr>
            </thead>

            <tbody>
                {% for p in pesanan %}
                <tr>

                    <td class="text-center">{{ p.id }}</td>
                    <td>{{ p.nama }}</td>
                    <td>{{ p.kontak }}</td>
                    <td>{{ p.jenis_print }}</td>
                    <td>{{ p.ukuran }}</td>
                    <td class="text-center">{{ p.jumlah }}</td>

                    <!-- Download Button -->
                    <td class="text-center">
                        <a href="/download/{{ p.file_path.split('/')[-1] }}" 
                           class="btn btn-sm btn-primary">
                           â¬‡ Download
                        </a>
                    </td>

                    <!-- Status Badge -->
                    <td class="text-center">

                        {% if p.status == 'pending' %}
                            <span class="badge bg-warning text-dark">Pending</span>

                        {% elif p.status == 'selesai' %}
                            <span class="badge bg-success">Selesai</span>

                        {% elif p.status == 'batal' %}
                            <span class="badge bg-danger">Batal</span>

                        {% endif %}

                    </td>

                    <!-- Update Status -->
                    <td class="text-center">

                        <form action="/update/{{ p.id }}" method="POST">
                            <select name="status" 
                                    class="form-select form-select-sm"
                                    onchange="this.form.submit()">

                                <option value="pending" {% if p.status=='pending' %}selected{% endif %}>
                                    Pending
                                </option>

                                <option value="selesai" {% if p.status=='selesai' %}selected{% endif %}>
                                    Selesai
                                </option>

                                <option value="batal" {% if p.status=='batal' %}selected{% endif %}>
                                    Batal
                                </option>

                            </select>
                        </form>

                    </td>

                </tr>
                {% endfor %}
            </tbody>

        </table>
    </div>

</div>

</body>
</html>